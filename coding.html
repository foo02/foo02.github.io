<!DOCTYPE html>
<html><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>コーディングスタイル</title>
<link rel="stylesheet" href="https://foo02.github.io/normalize.css" />
<link rel="stylesheet" href="https://foo02.github.io/style.css" />
<link rel="icon" href="/favicon.png" />
</head><body><header>
<script type="text/javascript" src="//xa.shinobi.jp/ufo/190668700"></script><noscript><a href="//xa.shinobi.jp/bin/gg?190668700" target="_blank"><img src="//xa.shinobi.jp/bin/ll?190668700" border="0"></a><br><span style="font-size:9px"><img style="margin:0;vertical-align:text-bottom;" src="//img.shinobi.jp/tadaima/fj.gif" width="19" height="11"> </span></noscript>
<div id="date"></div>
<div><a href="https://foo02.github.io/">トップページ</a></div>
<h1>コーディングスタイル</h1>
<nav id="TableOfContents">
  <ul>
    <li><a href="#はじめに">はじめに</a></li>
    <li><a href="#コメント">コメント</a></li>
    <li><a href="#空白文字">空白文字</a>
      <ul>
        <li><a href="#空行">空行</a></li>
        <li><a href="#スペース">スペース</a></li>
        <li><a href="#インデント">インデント</a></li>
      </ul>
    </li>
    <li><a href="#識別子">識別子</a></li>
    <li><a href="#制御文">制御文</a></li>
    <li><a href="#定義文">定義文</a></li>
    <li><a href="#コードフォーマッタclangformat">コードフォーマッタ(ClangFormat)</a></li>
  </ul>
</nav>
</header><div id="content">
<h2 id="はじめに">はじめに</h2>
<p>プログラミングにおいて読みやすく間違いに気づきやすいコードを記述するための工夫が<em>コーディングスタイル</em>です。以下に示すようなスタイルにこだわる必要はありませんが、一貫したスタイルで記述されていないコードにはやはり問題があります。ここでは参考としてC++のコーディングスタイルを紹介します。C++のコーディングスタイルについては<a href="http://stlalv.la.coocan.jp/">C++マニアック</a>や<a href="https://www.wxwidgets.org/develop/coding-guidelines/">wxWidgetsのコーディングガイドライン</a>が参考になります。</p>
<h2 id="コメント">コメント</h2>
<p>他の人がコードを読む手助けになるようなコメントを記述するようにします。実行される文の処理をそのまま記述したようなコメントには意味がありません。</p>
<h2 id="空白文字">空白文字</h2>
<h3 id="空行">空行</h3>
<p>空行はコードを読みやすくするために使用します。コードブロックの前後に空行を挿入します。</p>
<h3 id="スペース">スペース</h3>
<p>スペースはコードを読みやすくするために使用します。括弧の前後や演算子の前後にはスペースを挿入します。</p>
<h3 id="インデント">インデント</h3>
<p>コードの階層構造を分かりやすくするために階層ごとにスペース2文字を行頭に挿入してインデントします。</p>
<h2 id="識別子">識別子</h2>
<p>変数や関数はコメントに頼らなくても役割や機能が分かるように命名します。プログラム全体で使用する定数は記号定数として定義します。そうすることによってコードが読みやすくなりコードのメンテナンスも容易になります。</p>
<p>識別子には意味のある英語を3単語以上使用し、それぞれの単語はできるだけ省略しないようにします。単語の区切り方には次のようなものがあります。</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>パスカルケース (PascalCase)</td>
<td>それぞれの単語の頭文字を大文字にする(先頭は大文字)</td>
</tr>
<tr>
<td>キャメルケース (camelCase)</td>
<td>それぞれの単語の頭文字を大文字にする(先頭は小文字)</td>
</tr>
<tr>
<td>スネークケース (snake_case)</td>
<td>それぞれの単語を&quot;_&quot;(アンダースコア)で区切る</td>
</tr>
</tbody>
</table>
<p>変数名・関数名はパスカルケース(PascalCase)にします。定数名は大文字のスネークケース(SNAKE_CASE)にします。変数名には変数の型や種類を表すプレフィクスをつけます。ループのインデックスなど狭い範囲で使用する変数の名前はできるだけ短くして目立たないようにします。関数名は&quot;述語+目的語&quot;の形にして関数の機能が分かるようにします。戻り値のある関数の名前には戻り値の型を表すプレフィクスをつけます。</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>種類</td>
<td>プレフィクス</td>
<td>備考</td>
</tr>
<tr>
<td>クラス</td>
<td>C</td>
<td>Class</td>
</tr>
<tr>
<td>構造体</td>
<td>S</td>
<td>Structure</td>
</tr>
<tr>
<td>共用体</td>
<td>U</td>
<td>Union</td>
</tr>
<tr>
<td>列挙型</td>
<td>E</td>
<td>Enumerate</td>
</tr>
<tr>
<td>メンバ変数</td>
<td>m_</td>
<td>Member</td>
</tr>
<tr>
<td>グローバル変数</td>
<td>g_</td>
<td>Global</td>
</tr>
<tr>
<td>static</td>
<td>s_</td>
<td></td>
</tr>
<tr>
<td>const</td>
<td>k</td>
<td></td>
</tr>
<tr>
<td>[ ] (配列)</td>
<td>a</td>
<td>Array</td>
</tr>
<tr>
<td>&amp; (参照)</td>
<td>r</td>
<td>Reference</td>
</tr>
<tr>
<td>* (ポインタ)</td>
<td>p</td>
<td>Pointer</td>
</tr>
<tr>
<td>*func( ) (関数ポインタ)</td>
<td>pf</td>
<td>Pointer of Function</td>
</tr>
<tr>
<td>テンプレート引数</td>
<td>t</td>
<td>Template</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>型</td>
<td>プレフィクス</td>
</tr>
<tr>
<td>unsigned</td>
<td>u</td>
</tr>
<tr>
<td>short</td>
<td>s</td>
</tr>
<tr>
<td>long</td>
<td>l</td>
</tr>
<tr>
<td>bool</td>
<td>b</td>
</tr>
<tr>
<td>char</td>
<td>c</td>
</tr>
<tr>
<td>wchar_t</td>
<td>w</td>
</tr>
<tr>
<td>int</td>
<td>i</td>
</tr>
<tr>
<td>float</td>
<td>f</td>
</tr>
<tr>
<td>double</td>
<td>d</td>
</tr>
<tr>
<td>string</td>
<td>str</td>
</tr>
<tr>
<td>vector</td>
<td>vec</td>
</tr>
<tr>
<td>list</td>
<td>list</td>
</tr>
<tr>
<td>map</td>
<td>map</td>
</tr>
<tr>
<td>pair</td>
<td>pair</td>
</tr>
<tr>
<td>iterator</td>
<td>it</td>
</tr>
</tbody>
</table>
<h2 id="制御文">制御文</h2>
<p>命令文が1行の場合でも&quot;{ }&quot;(ブレース)は省略しないようにします。命令文がない場合でもswitch文のdefaultは省略しないようにします。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C++" data-lang="C++"><span style="color:#66d9ef">if</span> ( ... ) {      <span style="color:#66d9ef">if</span> (false) {             <span style="color:#66d9ef">if</span> (false      <span style="color:#66d9ef">if</span> (true
    ...           } <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span> ( ... ) {      <span style="color:#f92672">||</span> ...         <span style="color:#f92672">&amp;&amp;</span> ...  
} <span style="color:#66d9ef">else</span> {              ...                  <span style="color:#f92672">||</span> ...         <span style="color:#f92672">&amp;&amp;</span> ...  
    ...           } <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">if</span> ( ... ) {      <span style="color:#f92672">||</span> ...         <span style="color:#f92672">&amp;&amp;</span> ...  
}                     ...                  ) {            ) {     
                  } <span style="color:#66d9ef">else</span> {                     ...            ... 
                      ...                  }              }       
                  }                                               

<span style="color:#66d9ef">switch</span> ( ... ) {       <span style="color:#66d9ef">for</span> ( i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span>; <span style="color:#f92672">++</span>i ) {         
<span style="color:#66d9ef">break</span>; <span style="color:#66d9ef">case</span> ... <span style="color:#f92672">:</span>          ...                              
    ...                }                                    
<span style="color:#66d9ef">break</span>; <span style="color:#66d9ef">case</span> ... <span style="color:#f92672">:</span>                                           
    ...                <span style="color:#66d9ef">while</span> ( ... ) {      <span style="color:#66d9ef">do</span> {            
<span style="color:#66d9ef">break</span>; <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span>            ...                  ...         
    ...                }                    } <span style="color:#66d9ef">while</span> ( ... );
}</code></pre></div></div>
</figure>
<h2 id="定義文">定義文</h2>
<p>戻り値がなくてもreturn文は省略しないようにします。戻り値を&quot;( )&quot;(括弧)でくくる必要はありません。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C++" data-lang="C++"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// 記号定数は名前空間の中に定義する
</span><span style="color:#75715e"></span><span style="color:#66d9ef">namespace</span> symbol {
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> SIZE <span style="color:#f92672">=</span> <span style="color:#ae81ff">256</span>;
}  <span style="color:#75715e">// namespace symbol
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;
<span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> symbol;

<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">256</span>;
<span style="color:#66d9ef">int</span> iYear, iMonth, iDay;  <span style="color:#75715e">// 相互に関連する変数はまとめて定義する
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> aiMatrix[<span style="color:#ae81ff">3</span>][<span style="color:#ae81ff">4</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">13</span>, <span style="color:#ae81ff">14</span>, <span style="color:#ae81ff">21</span>, <span style="color:#ae81ff">22</span>, <span style="color:#ae81ff">23</span>, <span style="color:#ae81ff">24</span>, <span style="color:#ae81ff">31</span>, <span style="color:#ae81ff">32</span>, <span style="color:#ae81ff">33</span>, <span style="color:#ae81ff">34</span>, };

<span style="color:#66d9ef">float</span> <span style="color:#a6e22e">fGetAverage</span>(<span style="color:#66d9ef">float</span> f1, <span style="color:#66d9ef">float</span> f2) {
  <span style="color:#66d9ef">return</span> (f1 <span style="color:#f92672">+</span> f2) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2.0</span>;
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CDerived</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> CBase {
 <span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>  <span style="color:#75715e">// パブリックメンバを先に記述する
</span><span style="color:#75715e"></span>  CDerived() <span style="color:#f92672">:</span> m_i(<span style="color:#ae81ff">0</span>) {
      ...
    <span style="color:#66d9ef">return</span>; 
  }
  CDerived(<span style="color:#66d9ef">const</span> CDerived<span style="color:#f92672">&amp;</span> r) { m_i <span style="color:#f92672">=</span> r.iGet(); <span style="color:#66d9ef">return</span>; }
  <span style="color:#f92672">~</span>CDerived() {
     ...
    <span style="color:#66d9ef">return</span>;
  }
  <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">iGet</span>() { <span style="color:#66d9ef">return</span> m_i; }
  <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Set</span>(<span style="color:#66d9ef">int</span> i) { m_i <span style="color:#f92672">=</span> i; <span style="color:#66d9ef">return</span>; }

 <span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
  <span style="color:#66d9ef">int</span> m_i;
};</code></pre></div></div>
</figure>
<h2 id="コードフォーマッタclangformat">コードフォーマッタ(ClangFormat)</h2>
<p>コードフォーマッタは設定に従ってプログラムのコードを整形してくれます。<a href="https://ja.wikipedia.org/wiki/Clang">Clang</a>というコンパイラに付属しているClangFormatはC言語ライクなプログラミング言語(C/C++/Objective-C/Objective-C++)に対応しているフォーマッタです。</p>
<p>ClangはMSYS2でインストールすることができます。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext"># pacman -S mingw-w64-i686-clang
# pacman -S mingw-w64-x86_64-clang</code></pre></div></div>
</figure>
<p>整形したいソースファイルを指定してコマンドclang-formatを入力します。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext"># clang-format -i -style=google foo.c</code></pre></div></div>
</figure>
<p>オプション-styleでスタイルを指定します。オプション-iでファイルを上書きします。</p>
<p>以下のようなスクリプトを実行すればカレントディレクトリのソースファイルをまとめてフォーマットすることができます。</p>


<figure class="xCodeBlock">

<div class="xCodeBlock_code"><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">for</span> infile in *.<span style="color:#f92672">{</span>cpp,h<span style="color:#f92672">}</span>; <span style="color:#66d9ef">do</span>
  echo clang-format -i -style<span style="color:#f92672">=</span>google $infile
  clang-format -i -style<span style="color:#f92672">=</span>google $infile
<span style="color:#66d9ef">done</span>

exit <span style="color:#ae81ff">0</span></code></pre></div></div>
</figure>


    </div><footer>
<span>Powered by <a href="https://gohugo.io/">Hugo</a></span>
<iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=13&l=ez&f=ifr&linkID=fd3be03ff2b0d855a5bee93947c62cb5&t=foo23-22&tracking_id=foo23-22" width="468" height="60" scrolling="no" border="0" marginwidth="0" style="border:none;" frameborder="0"></iframe>
</footer>

</body>
</html>
