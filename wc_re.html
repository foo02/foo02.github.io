<!DOCTYPE html>
<html><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ワイルドカードと正規表現</title>
<link rel="stylesheet" href="https://foo02.github.io/normalize.css" />
<link rel="stylesheet" href="https://foo02.github.io/style.css" />
<link rel="icon" href="/favicon.png" />
</head><body><header>
<div id="date"></div>
<div><a href="https://foo02.github.io/">トップページ</a></div>
<h1>ワイルドカードと正規表現</h1>
<nav id="TableOfContents">
  <ul>
    <li><a href="#はじめに">はじめに</a></li>
    <li><a href="#ワイルドカード">ワイルドカード</a></li>
    <li><a href="#正規表現">正規表現</a></li>
  </ul>
</nav>
</header><div id="content">
<h2 id="はじめに">はじめに</h2>
<p><a href="https://ja.wikipedia.org/wiki/%E3%83%AF%E3%82%A4%E3%83%AB%E3%83%89%E3%82%AB%E3%83%BC%E3%83%89_(%E6%83%85%E5%A0%B1%E5%87%A6%E7%90%86)">ワイルドカード</a>および<a href="https://ja.wikipedia.org/wiki/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%8F%BE">正規表現</a>は文字列のパターンを指定する方法です。<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>パターンに文字列が一致することを<em>マッチする</em>といい、パターンを指定するための文字として<em>メタキャラクタ</em>(全て半角)が定義されています。</p>
<h2 id="ワイルドカード">ワイルドカード</h2>
<p>ワイルドカードはファイル名やファイルパスを指定するために使用されます。</p>
<p>ワイルドカードに使用するメタキャラクタは &ldquo;?&rdquo; および &ldquo;*&rdquo; です。</p>
<p>&ldquo;?&rdquo; は任意の1文字を表します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;foo???&#34; は &#34;foo123&#34;, &#34;fooabc&#34; などの文字列にマッチします。</code></pre></div>
<p>&ldquo;*&rdquo; は任意の文字列を表します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;foo*bar&#34; は foo で始まり bar で終わる文字列にマッチします。</code></pre></div>
<h2 id="正規表現">正規表現</h2>
<p>正規表現はテキストエディタなどで文字列の検索・置換に使用されます。</p>
<p>正規表現に使用するメタキャラクタは次のとおり。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">$ * + - . ? [ \ ] ^ { | }</code></pre></div>
<p>これらのメタキャラクタはパターンの中で特別な意味を持ち他の文字とは区別されます。</p>
<p>メタキャラクタ以外の文字はその文字自身を表します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;foo&#34; は文字列 &#34;foo&#34; にマッチします。
パターン &#34;bar&#34; は文字列 &#34;bar&#34; にマッチします。</code></pre></div>
<p>メタキャラクタを普通の文字として扱いたいときは直前に &ldquo;\&rdquo; をつけます。これを<em>エスケープする</em>といいます。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;foo\\bar&#34; は文字列 &#34;foo\bar&#34; にマッチします。
パターン &#34;foo\*bar&#34; は文字列 &#34;foo*bar&#34; にマッチします。</code></pre></div>
<p>任意の文字を表すには &ldquo;.&rdquo; と &ldquo;[ ]&rdquo; を使用します。</p>
<p>&ldquo;.&rdquo; は改行を除く1文字を表します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;foo...bar&#34; は &#34;foofoobar&#34;, &#34;foobarbar&#34; などの文字列にマッチします。</code></pre></div>
<p>&ldquo;[ ]&rdquo; 内の文字列はその文字列の各文字を表します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;[bar]&#34; は &#34;b&#34;, &#34;a&#34;, &#34;r&#34; の各文字にマッチします。</code></pre></div>
<p>&ldquo;[ ]&rdquo; 内に &ldquo;\&rdquo; を含める場合は &ldquo;\\&rdquo; としてエスケープします。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;[\\]&#34; は文字 &#34;\&#34; にマッチします。</code></pre></div>
<p>&ldquo;[ ]&rdquo; 内に &ldquo;]&rdquo; を含める場合は &ldquo;\]&rdquo; としてエスケープします。 &ldquo;[&rdquo; はそのままで問題ありません。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;[\]]&#34; は文字 &#34;]&#34; にマッチします。
パターン &#34;[[]&#34; は文字 &#34;[&#34; にマッチします。</code></pre></div>
<p>&ldquo;[ ]&rdquo; 内の &ldquo;-&rdquo; は文字の範囲を指定するメタキャラクタになります。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;[0-9]&#34; は数字にマッチします。
パターン &#34;[a-z]&#34; は英小文字にマッチします。
パターン &#34;[-bar]&#34; は &#34;-&#34;, &#34;b&#34;, &#34;a&#34;, &#34;r&#34; の各文字にマッチします。先頭の &#34;-&#34; はメタキャラクタとして扱われません。
パターン &#34;[9-0]&#34; は無効な表現です。文字コードが左から右へ昇順になるように記述する必要があります。</code></pre></div>
<p>&ldquo;[ ]&rdquo; 内の先頭の &ldquo;^&rdquo; は否定を意味するメタキャラクタになります。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;[^bar]&#34; は &#34;b&#34;, &#34;a&#34;, &#34;r&#34; 以外の文字にマッチします。
パターン &#34;[^0-9]&#34; は数字以外の文字にマッチします。
パターン &#34;[bar^]&#34; は &#34;b&#34;, &#34;a&#34;, &#34;r&#34;, &#34;^&#34; の各文字にマッチします。先頭に位置しない &#34;^&#34; はメタキャラクタとして扱われません。</code></pre></div>
<p>&ldquo;[ ]&rdquo; 内では &ldquo;\&rdquo;, &ldquo;]&rdquo;, &ldquo;(先頭に位置しない)-&rdquo;, &ldquo;(先頭の)^&rdquo; がメタキャラクタとして扱われ、その他の文字はその文字自身を表します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;[.*]&#34; は &#34;.&#34;, &#34;*&#34; の各文字にマッチします。</code></pre></div>
<p>パターンの連続を表すには &ldquo;*&rdquo;, &ldquo;+&rdquo;, &ldquo;?&rdquo;, &ldquo;{ }&rdquo; を使用します。</p>
<p>&ldquo;*&rdquo; は直前のパターンの0回以上の連続を表します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;f*oo&#34; は &#34;oo&#34;, &#34;foo&#34;, &#34;ffoo&#34;, &#34;ffffoo&#34; などの文字列にマッチします。
パターン &#34;ba*r&#34; は &#34;br&#34;, &#34;bar&#34;, &#34;baar&#34;, &#34;baaaar&#34; などの文字列にマッチします。</code></pre></div>
<p>&ldquo;+&rdquo; は直前のパターンの1回以上の連続を表します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;f+oo&#34; は &#34;foo&#34;, &#34;ffoo&#34;, &#34;ffffoo&#34; などの文字列にマッチします。
パターン &#34;ba+r&#34; は &#34;bar&#34;, &#34;baar&#34;, &#34;baaaar&#34; などの文字列にマッチします。</code></pre></div>
<p>&ldquo;?&rdquo; は直前のパターンの0回以上1回以下の連続(直前のパターンの有無)を表します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;f?oo&#34; は &#34;oo&#34;, &#34;foo&#34; の各文字列にマッチします。
パターン &#34;ba?r&#34; は &#34;br&#34;, &#34;bar&#34; の各文字列にマッチします。</code></pre></div>
<p>&ldquo;{ }&rdquo; は直前のパターンの指定回数の連続を表します。</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>{3}</td>
<td>3回の連続</td>
</tr>
<tr>
<td>{3,}</td>
<td>3回以上の連続</td>
</tr>
<tr>
<td>{3,4}</td>
<td>3回以上4回以下の連続</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;f{3}oo&#34; は文字列 &#34;fffoo&#34; にマッチします。
パターン &#34;f{2,3}oo&#34; は &#34;ffoo&#34;, &#34;fffoo&#34; の各文字列にマッチします。</code></pre></div>
<p>&ldquo;*&rdquo;, &ldquo;+&rdquo;, &ldquo;?&rdquo;, &ldquo;{ }&rdquo; の直前にパターンが無い表現は無効です。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;*foo&#34;, &#34;+bar&#34;, &#34;?foo&#34; は全て無効な表現です。</code></pre></div>
<p>メタキャラクタとして &ldquo;*&rdquo;, &ldquo;+&rdquo; を含む表現は可能な限り長いパターンにマッチ(最長一致)します。可能な限り短いパターンにマッチ(最短一致)させるには &ldquo;*&rdquo;, &ldquo;+&rdquo; の直後に &ldquo;?&rdquo; をつけます。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;.*bar&#34; は文字列 &#34;foobarfoobar&#34; に対して文字列 &#34;foobarfoobar&#34; にマッチします。
パターン &#34;.*?bar&#34; は文字列 &#34;foobarfoobar&#34; に対して文字列 &#34;foobar&#34; にマッチします。</code></pre></div>
<p>位置を表すには &ldquo;^&rdquo; と &ldquo;$&rdquo; を使用します。 &ldquo;^&rdquo; は行頭を表します。 &ldquo;$&rdquo; は行末を表します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;^foo&#34; は行頭にある文字列 &#34;foo&#34; にマッチします。
パターン &#34;^.*bar&#34; は行頭から &#34;bar&#34; までの文字列にマッチします。
パターン &#34;foo$&#34; は行末にある文字列 &#34;foo&#34; にマッチします。
パターン &#34;^bar$&#34; は &#34;bar&#34; という文字列のみが存在する行にマッチします。
パターン &#34;^^&#34; は行頭にある文字 &#34;^&#34; にマッチします。行頭に位置しない &#34;^&#34; はメタキャラクタとして扱われません。
パターン &#34;$$&#34; は行末にある文字 &#34;$&#34; にマッチします。行末に位置しない &#34;$&#34; はメタキャラクタとして扱われません。</code></pre></div>
<p>複数のパターンを指定するには &ldquo;|&rdquo; を使用します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;foo|bar&#34; は &#34;foo&#34;, &#34;bar&#34; の各文字列にマッチします。
パターン &#34;foo|bar|foobar&#34; は &#34;foo&#34;, &#34;bar&#34;, &#34;foobar&#34; の各文字列にマッチします。
パターン &#34;f?oo|ba?r&#34; は &#34;oo&#34;, &#34;foo&#34;, &#34;br&#34;, &#34;bar&#34; の各文字列にマッチします。</code></pre></div>
<p>メタキャラクタの適用範囲を指定するには &ldquo;( )&rdquo; を使用します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;(foo)?bar&#34; は &#34;bar&#34;, &#34;foobar&#34; の各文字列にマッチします。
パターン &#34;(foo)+bar&#34; は &#34;foobar&#34;, &#34;foofoobar&#34;, &#34;foofoofoobar&#34; などの文字列にマッチします。
パターン &#34;(foo|bar)foo&#34; は &#34;foofoo&#34;, &#34;barfoo&#34; の各文字列にマッチします。</code></pre></div>
<p>&ldquo;\n&rdquo; はn番目の &ldquo;( )&rdquo; で囲まれたパターンを表します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;(foo)(bar)\2\1&#34; は文字列 &#34;foobarbarfoo&#34; にマッチします。</code></pre></div>
<p>慣用的な表現として以下のようなものがあります。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plaintext" data-lang="plaintext">パターン &#34;.*&#34; は任意の文字列を表します。(ワイルドカードの &#34;*&#34; と同じ意味になります)
パターン &#34;^$&#34; は空行を表します。
パターン &#34;^.*$&#34; は任意の1行を表します。</code></pre></div>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>ワイルドカードと正規表現を混同した記述が多く見受けられますが惑わされないよう注意してください。両者は似て非なるものです。&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>


    </div><footer>
<span>Powered by <a href="https://gohugo.io/">Hugo</a></span>
<iframe src="https://rcm-fe.amazon-adsystem.com/e/cm?o=9&p=13&l=ez&f=ifr&linkID=fd3be03ff2b0d855a5bee93947c62cb5&t=foo23-22&tracking_id=foo23-22" width="468" height="60" scrolling="no" border="0" marginwidth="0" style="border:none;" frameborder="0"></iframe>
</footer>

</body>
</html>
